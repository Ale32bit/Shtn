<!DOCTYPE html>
<html lang="en">

<%- include("partials/header"); %>

<%- include("partials/navbar"); %>
<body>
<div class="valign-wrapper" style="width:100%;height:75vh;position: absolute;">
    <div class="valign" style="width:100%;">
        <div class="container">
            <div class="row">
                <div class="col s12 m6 offset-m3">
                    <h3 class="teal-text text-lighten-1 center">Link shortened!</h3>
                    <h5 class="center"><a href="#" id="short_link" class="white-text"
                                          style="text-decoration: underline; ">abcdef</a></h5>
                    <p class="center"><a href="#" onclick="return copied();" class="white-text"
                                         style="font-weight: 600;" id="copy_btn" data-clipboard-target="#copy_code">Click
                            here to copy the shortened link!</a></p>
                </div>
            </div>
        </div>
    </div>
</div>

<input id="copy_code" value="abcdef" readonly style="width: 0; height: 0;">
<script>
    let url = new URL(location.origin);
    url.pathname = "/<%= code %>";

    let short_link = document.getElementById("short_link");
    let copy_code = document.getElementById("copy_code");
    let copy_btn = document.getElementById("copy_btn");
    short_link.innerText = url.href;
    short_link.href = url.href;
    copy_code.value = url.href;

    let original_copy_btn = copy_btn.innerText;

    function copied() {
        copy_btn.innerText = "Copied!"
        setTimeout(function () {
            copy_btn.innerText = original_copy_btn;
        }, 1500); // 1.5 seconds
    }


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
<script>new Clipboard('#copy_btn');</script>

<%- include("partials/footer"); %>

</body>
</html>
